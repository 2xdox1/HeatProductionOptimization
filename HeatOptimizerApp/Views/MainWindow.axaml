<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=netstandard"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Avalonia;assembly=LiveChartsCore.SkiaSharpView.Avalonia"
        x:Class="HeatOptimizerApp.Views.MainWindow"
        Title="Heat Optimizer"
        Width="700"
        Height="900">

  <DockPanel>

    <!-- Fixed Top Toolbar -->
    <Border Padding="10" Background="LightGray" DockPanel.Dock="Top">
      <StackPanel Orientation="Horizontal" Spacing="10">
        <Button Content="Save Scenario Results" Click="SaveScenarioResults"/>
        <Button Content="Load Saved Result" Click="OnOpenSavedResult"/>
        <Button Content="Reload Time Series" Click="ReloadTimeSeries"/>
        <Button Content="Load Winter Data" Click="LoadWinterData"/>
        <Button Content="Load Summer Data" Click="LoadSummerData"/>
      </StackPanel>
    </Border>

    <!-- Tab Control -->
    <TabControl DockPanel.Dock="Bottom">

      <!-- Tab 1: Scenario View -->
      <TabItem Header="Scenario View">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="10" Spacing="10">

            <!-- Scenario Buttons -->
            <StackPanel Orientation="Horizontal" Spacing="5">
              <Button Content="Scenario 1" Click="LoadScenario1"/>
              <Button Content="Scenario 2" Click="LoadScenario2"/>
              <Button Content="Compare Scenarios" Click="CompareScenarios"/>
            </StackPanel>

            <!-- Sort and Filter Controls -->
            <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
              <TextBlock Text="Sort by:" VerticalAlignment="Center"/>
              <ComboBox SelectedItem="{Binding SelectedSortOption, Mode=TwoWay}">
                <sys:String>Name</sys:String>
                <sys:String>Production Cost</sys:String>
                <sys:String>CO₂ Emission</sys:String>
              </ComboBox>



              <CheckBox Content="Only show units with electricity generation"
                        IsChecked="{Binding FilterElectricOnly}" Margin="20,0,0,0"/>
            </StackPanel>

            <!-- Units List -->
            <ListBox ItemsSource="{Binding Units}"
                     SelectedItem="{Binding SelectedUnitName, Mode=TwoWay}"
                     Height="250"
                     Margin="0,10,0,0"/>

            <!-- Unit Details -->
            <TextBlock Text="{Binding SelectedUnitDetails}"
                       Margin="0,10,0,0"
                       TextWrapping="Wrap"
                       FontSize="12"/>

            <!-- Chart View Toggles -->
            <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,20,0,0">
              <TextBlock Text="Season:" VerticalAlignment="Center"/>
              <ToggleButton Content="Winter" IsChecked="{Binding IsWinter}" />
              <ToggleButton Content="Summer" IsChecked="{Binding IsSummer}" />
              <TextBlock Text="Time Scale:" Margin="20,0,0,0" VerticalAlignment="Center"/>
              <ToggleButton Content="Hourly" IsChecked="{Binding IsHourly}" />
              <ToggleButton Content="Daily" IsChecked="{Binding IsDaily}" />
            </StackPanel>

            <!-- Dynamic Chart Title -->
            <TextBlock Text="{Binding ChartTitle}" FontWeight="Bold" FontSize="16" Margin="0,20,0,0"/>

            <!-- Unified Chart Area -->
            <lvc:CartesianChart Series="{Binding ChartSeries}"
                                XAxes="{Binding XAxes}"
                                YAxes="{Binding YAxes}"
                                LegendPosition="Right"
                                Height="300"/>

            <!-- Legend -->
            <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,20,0,0">
              <StackPanel Orientation="Horizontal" Spacing="5">
                <Rectangle Width="15" Height="15" Fill="SteelBlue"/>
                <TextBlock Text="Production Cost" VerticalAlignment="Center"/>
              </StackPanel>
              <StackPanel Orientation="Horizontal" Spacing="5">
                <Rectangle Width="15" Height="15" Fill="OrangeRed"/>
                <TextBlock Text="CO₂ Emission" VerticalAlignment="Center"/>
              </StackPanel>
            </StackPanel>

          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <!-- Tab 2: Comparison & Summary -->
      <TabItem Header="Comparison &amp; Summary">
        <StackPanel Margin="10">
          <TextBlock Text="Comparison &amp; Summary UI goes here."/>
        </StackPanel>
      </TabItem>

    </TabControl>
  </DockPanel>
</Window>
