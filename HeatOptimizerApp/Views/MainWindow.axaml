<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=netstandard"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Avalonia;assembly=LiveChartsCore.SkiaSharpView.Avalonia"
        x:Class="HeatOptimizerApp.Views.MainWindow"
        Title="Heat Optimizer"
        Width="700"
        Height="900">
        
  <DockPanel>

    <!-- Top Toolbar -->
    <Border Padding="10" Background="#e2000f" DockPanel.Dock="Top">
      <StackPanel Orientation="Horizontal" Spacing="10">
        <Button Content="Save Scenario Results" Click="SaveScenarioResults"/>
        <Button Content="Load Saved Result" Click="OnOpenSavedResult"/>
        <Button Content="Reload Time Series" Click="ReloadTimeSeries"/>
        <Button Content="Load Winter Data" Click="LoadWinterData"/>
        <Button Content="Load Summer Data" Click="LoadSummerData"/>
      </StackPanel>
    </Border>

    <!-- Main Tabs -->
    <TabControl DockPanel.Dock="Bottom">

      <!-- Scenario View Tab -->
      <TabItem Header="Scenario View">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="10" Spacing="10">
            <StackPanel Orientation="Horizontal" Spacing="5">
              <Button Content="Scenario 1" Click="LoadScenario1" />
              <Button Content="Scenario 2" Click="LoadScenario2" />
              <Button Content="Compare Scenarios" Click="CompareScenarios" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
              <TextBlock Text="Sort by:" VerticalAlignment="Center"/>
              <ComboBox SelectedItem="{Binding SelectedSortOption, Mode=TwoWay}">
                <sys:String>Name</sys:String>
                <sys:String>Production Cost</sys:String>
                <sys:String>CO₂ Emission</sys:String>
              </ComboBox>

              <CheckBox Content="Only show units with electricity generation"
                        IsChecked="{Binding FilterElectricOnly}" Margin="20,0,0,0"/>
            </StackPanel>

            <ListBox ItemsSource="{Binding Units}"
                     SelectedItem="{Binding SelectedUnitName, Mode=TwoWay}"
                     />

            <TextBlock Text="{Binding SelectedUnitDetails}"
                       Margin="0,5,0,0"
                       TextWrapping="Wrap"
                       FontSize="12"/>
            <Image Source="{Binding SelectedUnitBitmap}"
                    MaxHeight="100"
                  HorizontalAlignment="Left"
                   Margin="0,5,0,0"/>

            <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,20,0,0">
              <TextBlock Text="Season:" VerticalAlignment="Center"/>
              <ToggleButton Content="Winter" IsChecked="{Binding IsWinter}" />
              <ToggleButton Content="Summer" IsChecked="{Binding IsSummer}" />
              <TextBlock Text="Time Scale:" Margin="20,0,0,0" VerticalAlignment="Center"/>
              <ToggleButton Content="Hourly" IsChecked="{Binding IsHourly}" />
              <ToggleButton Content="Daily" IsChecked="{Binding IsDaily}" />
            </StackPanel>

            <TextBlock Text="{Binding ChartTitle}" FontWeight="Bold" FontSize="16" Margin="0,20,0,0"/>

            <lvc:CartesianChart Series="{Binding ChartSeries}"
                                XAxes="{Binding XAxes}"
                                YAxes="{Binding YAxes}"
                                LegendPosition="Right"
                                Height="300"/>

            <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,20,0,0">
              <StackPanel Orientation="Horizontal" Spacing="5">
                <Rectangle Width="15" Height="15" Fill="SteelBlue"/>
                <TextBlock Text="Production Cost" VerticalAlignment="Center"/>
              </StackPanel>
              <StackPanel Orientation="Horizontal" Spacing="5">
                <Rectangle Width="15" Height="15" Fill="OrangeRed"/>
                <TextBlock Text="CO₂ Emission" VerticalAlignment="Center"/>
              </StackPanel>
            </StackPanel>

          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <!-- Comparison Tab -->
      <TabItem Header="Comparison">
        <ScrollViewer>
          <StackPanel Margin="20" Spacing="12">
            <TextBlock Text="Scenario Comparison" FontSize="20" FontWeight="Bold" />

            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto" Margin="0,10,0,0">
              <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding Scenario1Summary.ScenarioName}" FontWeight="Bold"/>
              <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Scenario2Summary.ScenarioName}" FontWeight="Bold"/>

              <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding Scenario1Summary.FormattedHeat}" />
              <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Scenario2Summary.FormattedHeat}" />

              <TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding Scenario1Summary.FormattedCost}" />
              <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Scenario2Summary.FormattedCost}" />

              <TextBlock Grid.Row="3" Grid.Column="0" Text="{Binding Scenario1Summary.FormattedCO2}" />
              <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding Scenario2Summary.FormattedCO2}" />

              <TextBlock Grid.Row="4" Grid.Column="0" Text="{Binding Scenario1Summary.FormattedGas}" />
              <TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding Scenario2Summary.FormattedGas}" />

              <TextBlock Grid.Row="5" Grid.Column="0" Text="{Binding Scenario1Summary.FormattedElectricity}" />
              <TextBlock Grid.Row="5" Grid.Column="1" Text="{Binding Scenario2Summary.FormattedElectricity}" />
            </Grid>
          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <!-- Winter Chart Tab 
      <TabItem Header="Winter Chart">
        <ScrollViewer>
          <lvc:CartesianChart Series="{Binding WinterSeries}"
                              XAxes="{Binding XAxes}"
                              YAxes="{Binding YAxes}"
                              LegendPosition="Right"
                              Height="400"/>
        </ScrollViewer>
      </TabItem>-->

      <!-- Summer Chart Tab 
      <TabItem Header="Summer Chart">
        <ScrollViewer>
          <lvc:CartesianChart Series="{Binding SummerSeries}"
                              XAxes="{Binding XAxesSummer}"
                              YAxes="{Binding YAxesSummer}"
                              LegendPosition="Right"
                              Height="400"/>
        </ScrollViewer>
      </TabItem>  -->
      <TabItem Header="City Map">
        <ScrollViewer>
          <StackPanel Margin="20" Spacing="10">
            <Image Source="../Assets/CityMap.png" Width="600" Height="400"/>
            <TextBlock Text="City Map with Heat Distribution" FontSize="16" FontWeight="Bold" Margin="0,10,0,0" TextAlignment="Center"/>
          </StackPanel>
        </ScrollViewer>
      </TabItem> 

      <!-- Simulated Chart Tab -->
      <TabItem Header="Simulated Chart">
        <ScrollViewer>
          <StackPanel Margin="20" Spacing="10">
            <Button Content="Load Simulated Chart" Click="OnLoadSimulatedChart" />
            <lvc:CartesianChart Series="{Binding SimulatedSeries}"
                                XAxes="{Binding SimulatedXAxis}"
                                YAxes="{Binding SimulatedYAxis}"
                                LegendPosition="Right"
                                Height="400"/>
          </StackPanel>
        </ScrollViewer>
      </TabItem>

    </TabControl>
  </DockPanel>
</Window>