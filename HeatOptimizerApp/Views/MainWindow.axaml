<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Avalonia;assembly=LiveChartsCore.SkiaSharpView.Avalonia"
        x:Class="HeatOptimizerApp.Views.MainWindow"
        Title="Heat Optimizer"
        Width="600"
        Height="900">

  <DockPanel>

    <!-- Fixed Top Toolbar -->
    <Border Padding="10" Background="LightGray" DockPanel.Dock="Top">
      <StackPanel Orientation="Horizontal" Spacing="10">
        <Button Content="Save Scenario Results" Click="SaveScenarioResults"/>
        <Button Content="Load Saved Result" Click="OnOpenSavedResult"/>
        <Button Content="Reload Time Series" Click="ReloadTimeSeries"/>
        <!-- New buttons to load real CSV data -->
        <Button Content="Load Winter Data" Click="LoadWinterData"/>
        <Button Content="Load Summer Data" Click="LoadSummerData"/>
      </StackPanel>
    </Border>

    <!-- Tab Control -->
    <TabControl DockPanel.Dock="Bottom">

      <!-- Tab 1: Scenario View -->
      <TabItem Header="Scenario View">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="10" Spacing="10">

            <!-- Scenario Buttons -->
            <StackPanel Orientation="Horizontal" Spacing="5">
              <Button Content="Scenario 1" Click="LoadScenario1"/>
              <Button Content="Scenario 2" Click="LoadScenario2"/>
              <Button Content="Compare Scenarios" Click="CompareScenarios"/>
            </StackPanel>

            <!-- Chart View Toggles -->
            <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
              <TextBlock Text="Season:" VerticalAlignment="Center"/>
              <ToggleButton Content="Winter" IsChecked="{Binding IsWinter}" />
              <ToggleButton Content="Summer" IsChecked="{Binding IsSummer}" />
              <TextBlock Text="Time Scale:" Margin="20,0,0,0" VerticalAlignment="Center"/>
              <ToggleButton Content="Hourly" IsChecked="{Binding IsHourly}" />
              <ToggleButton Content="Daily" IsChecked="{Binding IsDaily}" />
            </StackPanel>

            <!-- Dynamic Chart Title -->
            <TextBlock Text="{Binding ChartTitle}" FontWeight="Bold" FontSize="16" Margin="0,20,0,0"/>

            <!-- Unified Chart Area -->
            <lvc:CartesianChart Series="{Binding ChartSeries}"
                                XAxes="{Binding XAxes}"
                                YAxes="{Binding YAxes}"
                                LegendPosition="Right"
                                Height="300"/>

            <!-- Legend -->
            <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,20,0,0">
              <StackPanel Orientation="Horizontal" Spacing="5">
                <Rectangle Width="15" Height="15" Fill="SteelBlue"/>
                <TextBlock Text="Production Cost" VerticalAlignment="Center"/>
              </StackPanel>
              <StackPanel Orientation="Horizontal" Spacing="5">
                <Rectangle Width="15" Height="15" Fill="OrangeRed"/>
                <TextBlock Text="COâ‚‚ Emission" VerticalAlignment="Center"/>
              </StackPanel>
            </StackPanel>

          </StackPanel>
        </ScrollViewer>
      </TabItem>

      <!-- Tab 2: Production Units -->
      <TabItem Header="Production Units">
        <StackPanel Margin="10" Spacing="10">
          <TextBlock Text="Production Units" FontWeight="Bold" Margin="0,0,0,5"/>
          <TextBlock FontStyle="Italic" FontSize="12" Foreground="Gray" Margin="0,0,0,10"
                    Text="Note: Units displayed correspond to the selected scenario on the Scenario View tab."/>
          <ListBox ItemsSource="{Binding Units}" Height="400"/>
        </StackPanel>
      </TabItem>


      <!-- Tab 3: Comparison & Summary -->
      <TabItem Header="Comparison &amp; Summary">
        <StackPanel Margin="10">
          <TextBlock Text="Comparison &amp; Summary UI goes here."/>
        </StackPanel>
      </TabItem>

    </TabControl>
  </DockPanel>
</Window>